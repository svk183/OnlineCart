"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const workspace_1 = require("@nrwl/workspace");
const ts = require("typescript");
const ast_utils_1 = require("@nrwl/workspace/src/utils/ast-utils");
function updateJestConfig(host) {
    if (host.exists('jest.config.js')) {
        const contents = host.read('jest.config.js').toString();
        const sourceFile = ts.createSourceFile('jest.config.js', contents, ts.ScriptTarget.Latest);
        const changes = [];
        ast_utils_1.getSourceNodes(sourceFile).forEach(node => {
            if (ts.isPropertyAssignment(node) &&
                ts.isIdentifier(node.name) &&
                node.name.text === 'collectCoverage') {
                changes.push(new ast_utils_1.RemoveChange('jest.config.js', node.getStart(sourceFile), node.getFullText(sourceFile)));
            }
        });
        workspace_1.insert(host, 'jest.config.js', changes);
    }
}
function default_1() {
    return updateJestConfig;
}
exports.default = default_1;
